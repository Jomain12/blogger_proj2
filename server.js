var express=require("express"),session=require("express-session"),passport=require("./config/passport.js"),exphbs=require("express-handlebars"),handlebars=require("handlebars"),MomentHandler=require("handlebars.moment");MomentHandler.registerHelpers(handlebars);var PORT=process.env.PORT||8080,db=require("./models"),app=express();app.use(express.urlencoded({extended:!0})),app.use(express.json()),app.use(express.static("public")),app.use(session({secret:"keyboard cat",resave:!0,saveUninitialized:!0})),app.use(passport.initialize()),app.use(passport.session()),app.engine("handlebars",exphbs({defaultLayout:"main"})),app.set("view engine","handlebars"),app.use(function(e,s,r){if(s.header("Access-Control-Allow-Origin","*"),s.header("Access-Control-Allow-Headers","*"),"OPTIONS"===e.method)return s.header("Access-Control-Allow-Methods","get, post, update, delete"),s.status(200).json({});r()}),require("./routes/html-routes.js")(app),require("./routes/api-routes.js")(app),db.sequelize.sync().then(function(){app.listen(PORT,function(){console.log("==> ðŸŒŽ  Listening on port %s. Visit http://localhost:%s/ in your browser.",PORT,PORT)})});