var db=require("../models"),passport=require("../config/passport");module.exports=function(o){o.post("/api/login",passport.authenticate("local"),function(o,t){t.json({email:o.user.email,id:o.user.id})}),o.post("/api/signup",function(o,t){db.User.create({email:o.body.email,password:o.body.password}).then(function(){t.redirect(307,"/api/login")}).catch(function(o){t.status(401).json(o)})}),o.get("/logout",function(o,t){o.logout(),t.redirect("/login")}),o.get("/api/user_data",function(o,t){o.user?t.json({email:o.user.email,id:o.user.id}):t.json({})}),o.post("/api/createBlog",function(o,t){db.Blogs.create({name:o.body.name,category:o.body.category,content:o.body.content}).then(function(){t.redirect(201)}).catch(function(o){t.status(500).json(o)})})};